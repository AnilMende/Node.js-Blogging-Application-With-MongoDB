<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("./partials/head") %>
        <title>Blog Page</title>
</head>

<body>
    <%- include("./partials/nav") %>

        <div class="container mt-4">
            <h1>
                <%= blog.title %>
            </h1>
            <img src="<%= blog.coverImageURL %>" width="600px">

            <pre class="mt-3"><%= blog.body %></pre>
        </div>

        <div class="container mt-4">
            <h1>Posted By</h1>
            <img src="<%= blog.createdBy.profileImageURL %>" width="50px">
            <%= blog.createdBy.fullName %>
        </div>

        <!-- for comments section -->

        <div class="container mt-3">
            <!-- to see the number of comments on particulr post we are using comments.length -->
            <h1>Comments (<%= comments.length %>)</h1>
            <% if (locals.user) { %>

                <form action="/blog/comment/<%= blog._id %>" method="post">
                    <div class="mb-3">
                        <input 
                         name="content" 
                         type="text" 
                         class="form-control" 
                         placeholder="Enter your comment">
                        
                        <button class="btn btn-sm btn-primary mt-3" type="submit">Add</button>
                    </div>
                </form>

            <% } %>

            <!-- for displaying the comments of the users -->
                <div class="mt-4">
                    <% comments.forEach(comment => { %>
                     
                        <img src="<%= comment.createdBy.profileImageURL %>" width="50px"> 
                        <%= comment.createdBy.fullName %>: 
                        <pre><%= comment.content %></pre>
                    <% }) %>
                </div>
        </div>
        <%- include("./partials/script") %>
</body>

</html>